<!DOCTYPE html>
<html>
<head>
    <title>JayData providers- Facebook user query</title>
    <meta name="keywords" content="JayData, HTML5, Javascript, FQL, Facebook, JayData providers">
    <meta name="description" content="This example show you: How can You get the current user's public personal data through FQL api.">
    <meta name="author" content="JayData, community@jaydata.org">

    <script type="text/javascript" src="../Content/Scripts/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="../Content/Scripts/jquery.tmpl.min.js"></script>
    <script type="text/javascript" src="../Content/Scripts/jaydata.js"></script>
    <script type="text/javascript" src="../Content/Scripts/jaydataproviders/FacebookProvider.js"></script>
    <script type="text/javascript" src="../Content/Scripts/JayDataModules/template.js"></script>
    <script type="text/javascript" src="../Content/Scripts/JayDataModules/errorhandler.js"></script>
    <script type="text/javascript" src="../Content/Scripts/bootstrap.min.js"></script>

    <link href="../Styles/Bootstrap/bootstrap.css" rel="stylesheet">
    <link href="../Styles/Bootstrap/bootstrap-responsive.css" rel="stylesheet">
    <link href="../Styles/Bootstrap/docs.css" rel="stylesheet">
    <link href="../Styles/mixins.css" rel="stylesheet">
    <link href="../Styles/dd.css" rel="stylesheet">

    <link href="/assets/img/favicon.ico" rel="shortcut icon" type="image/x-icon" />
</head>
<body>
    <!-- Navbar ================================================== -->
    <div class="navbar navbar-fixed-top">
        <div class="navbar-inner">
            <div class="container">
                <ul class="nav">
                    <li class="active"><a href="http://www.jaydata.org/examples">Examples home</a></li>
                    <li><a href="http://www.jaydata.org">JayData.org home</a></li>
                    <li><a href="http://www.jaydata.org/documentation">Documentation</a></li>
                    <li><a href="http://www.jaydata.org/community">Community</a></li>
                    <li><a href="http://www.jaydata.org/forum">Forum</a></li>
                    <li><a href="http://www.jaydata.org/blog">Blog</a>
                    <li><a href="http://www.jaydata.org/backlogs">Write a new userstory!</a></li>
                </ul>
            </div>
        </div>
    </div>

    <div class="container">
        <header class="jumbotron masthead">
            <div class="inner tacenter">
                <h1>Facebook user example</h1>

                <div class="clear">
                    <h3 class="marginb5">Supported browsers:</h3>
                    <ul class="browser-list">
                        <!--<li class="browser ie" title="Internet Explorer 9.0+"></li>-->
                        <li class="browser firefox" title="Firefox 10.0+"></li>
                        <li class="browser chrome" title="Google Chrome 12+"></li>
                        <li class="browser safari" title="Safari 4+"></li>
                        <li class="browser blackberry" title="Blackberry 7+"></li>
                        <li class="browser wp" title="Windows Phone 7.5+"></li>
                        <li class="browser ios" title="iOS 4+"></li>
                        <li class="browser android" title="Android 2.2+"></li>
                    </ul>
                </div>

                <hr class="soften" />

                <h2>How can I get the current user's public personal data through FQL API?</h2>
<pre class="well well-white marginb10 iblock" style='color:#000000;background:#ffffff;'><span style='color:#0000E6; font-weight:bold; '>var</span> fqlContext <span style='color:#808030; '>=</span> <span style='color:#0000E6; font-weight:bold; '>new</span> $data<span style='color:#808030; '>.</span>Facebook<span style='color:#808030; '>.</span>FQLContext<span style='color:#808030; '>(</span><span style='color:#800080; '>{</span> name<span style='color:#800080; '>:</span> <span style='color:#800000; '>'Facebook'</span> <span style='color:#800080; '>}</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
fqlContext<span style='color:#808030; '>.</span>onReady<span style='color:#808030; '>(</span><span style='color:#0000E6; font-weight:bold; '>function</span> <span style='color:#808030; '>(</span>context<span style='color:#808030; '>)</span> <span style='color:#800080; '>{</span>
    context<span style='color:#808030; '>.</span>Users
        <span style='color:#808030; '>.</span>filter<span style='color:#808030; '>(</span><span style='color:#0000E6; font-weight:bold; '>function</span> <span style='color:#808030; '>(</span>f<span style='color:#808030; '>)</span> <span style='color:#800080; '>{</span> <span style='color:#0000E6; font-weight:bold; '>return</span> f<span style='color:#808030; '>.</span>uid <span style='color:#808030; '>==</span> <span style='color:#0000E6; font-weight:bold; '>this</span><span style='color:#808030; '>.</span>uid<span style='color:#800080; '>;</span> <span style='color:#800080; '>}</span><span style='color:#808030; '>,</span> <span style='color:#800080; '>{</span> uid<span style='color:#800080; '>:</span> $<span style='color:#808030; '>(</span><span style='color:#800000; '>'#userid'</span><span style='color:#808030; '>)</span><span style='color:#808030; '>.</span>val<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span> <span style='color:#800080; '>}</span><span style='color:#808030; '>)</span>
        <span style='color:#808030; '>.</span>toTemplate<span style='color:#808030; '>(</span><span style='color:#800000; '>"</span><span style='color:#800000; '>userTemplate</span><span style='color:#800000; '>"</span><span style='color:#808030; '>,</span> <span style='color:#800000; '>"</span><span style='color:#800000; '>result</span><span style='color:#800000; '>"</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
<span style='color:#800080; '>}</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
</pre>
            </div>
        </header>
        
        <section id="wrapper" class="container iblock well">
            <h2 class ="marginb5 show tacenter">Find Facebook user by ID</h2>
            <div id="example1">
                <input type="text" id="userid" class="autoComplete" value="" placeholder="enter user id" />
                <input type="button" id="search" class="btn btn-small" value="Search" />
            </div>

            <hr class="clear soften" />

            <div id="result"></div>

            <script type="text/javascript">
                jQuery.support.cors = true;

                $(function () {

                    var fqlContext = new $data.Facebook.FQLContext({ name: 'Facebook' });
                    fqlContext.onReady(function (context) {
                        $('#search').click(function (e) {
                            context.Users
                                .filter(function (f) { return f.uid == this.uid; }, { uid: $('#userid').val() })
                                .toTemplate("userTemplate", "result", noResult);
                        });
                    });

                    function noResult(items) {
                        if (items.length !== 1)
                            $("#result").append('User not found!');
                    }

                });
            </script>
            <div id="userTemplate" style="display: none">
                <ul>
                    <li>Full name: ${name}</li>
                    <li>First name: ${first_name}</li>
                    <li>Last name: ${last_name}</li>
                    <li>Sex: ${sex}</li>
                    <li>User id: ${uid}</li>
                </ul>
            </div>
        </section>
    </div>

    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-30304727-1']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>
</body>
</html>
