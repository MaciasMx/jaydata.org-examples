@model JayDataExamples.App_Code.Example
@{
    Layout = "~/Views/Shared/Layout_Default.cshtml";
    ViewBag.Title = "Kendo UI cascading combobox";
}

@section Meta {
    <meta name="keywords" content="JayData, HTML5, Javascript, Kendo UI, OData, IndexedDB, example" />
    <meta name="description" content="How to use the JayData with Kendo UI? See this simple example." />
}

@section Includes {
    <script type="text/javascript" src="~/Scripts/vendor/north.js"></script>
    <script type="text/javascript" src="http://jaydata-cdn.s3.amazonaws.com/datajs-1.0.3-patched.js"></script>
    <link href="../Styles/dd.css" rel="stylesheet" />
}
@section SupportedBrowsers {
    @{Html.RenderPartial("_IncludeSupportedBrowsers");}
}
@section SimilarContents {
    @{Html.RenderPartial("_IncludeRelatedContents");}
}
@section SourceCode {
    @{Html.RenderPartial("_IncludeDownloadableSource");}
}

@section Tags {
    @{Html.RenderPartial("_IncludeTags");}
}

@section Description {
    <p class="main-desc">
        Populate cascading Kendo comboboxes with remote live OData with typed data API. This Kendo autocomplete example uses a remote Northwind database. 
    </p>
}

@section CodeSource {
    <textarea id="code">
<script>
    $("#categories").kendoComboBox({
        placeholder: "Select category...",
        dataTextField: "Category_Name",
        dataValueField: "Category_ID",
        dataSource: remoteDB.Categories.asKendoDataSource()
    });

    var products = $("#products").kendoComboBox({
        autoBind: false,
        cascadeFrom: "categories",
        placeholder: "Select product...",
        dataTextField: "Product_Name",
        dataValueField: "Product_ID",
        dataSource: remoteDB.Products.asKendoDataSource()
    }).data("kendoComboBox");

    var orders = $("#orders").kendoComboBox({
        autoBind: false,
        cascadeFrom: "products",
        placeholder: "Select order...",
        dataTextField: "Order.Ship_City",
        dataValueField: "Order_ID",
        dataSource: remoteDB.Order_Details.include('Order').asKendoDataSource()
    }).data("kendoComboBox");
</script>
</textarea>

    <script>
        setTimeout(function () {
            CodeMirror.fromTextArea(document.getElementById('code'), {
                mode: 'text/html',
                lineNumbers: false
            });
        });
    </script>
}

@section CodeRunning {
    <div class="padding10">
        <p>
            <label for="categories">Categories:</label>
            <input id="categories" />
        </p>
        <p>
            <label for="products">Products:</label>
            <input id="products" disabled="disabled" />
        </p>
        <p>
            <label for="orders">Orders:</label>
            <input id="orders" disabled="disabled" />
        </p>

        <style scoped>
            .k-readonly {
                color: gray;
            }
        </style>

        <script>
            $.when($.ready, getRemoteNorthwind())
            .then(function ($, remoteDB) {
                $("#categories").kendoComboBox({
                    placeholder: "Select category...",
                    dataTextField: "Category_Name",
                    dataValueField: "Category_ID",
                    dataSource: remoteDB.Categories.asKendoDataSource()
                });
                var products = $("#products").kendoComboBox({
                    autoBind: false,
                    cascadeFrom: "categories",
                    placeholder: "Select product...",
                    dataTextField: "Product_Name",
                    dataValueField: "Product_ID",
                    dataSource: remoteDB.Products.asKendoDataSource()
                }).data("kendoComboBox");
                var orders = $("#orders").kendoComboBox({
                    autoBind: false,
                    cascadeFrom: "products",
                    placeholder: "Select order...",
                    dataTextField: "Order.Ship_City",
                    dataValueField: "Order_ID",
                    dataSource: remoteDB.Order_Details.include('Order').asKendoDataSource()
                }).data("kendoComboBox");
            });
        </script>
    </div>
}
